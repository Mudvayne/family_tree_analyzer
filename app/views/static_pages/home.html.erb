<div class="text-center">
	<% if !flash.empty? %>
		<% flash.keys.each do |k| %>
			<div class="alert alert-<%= k %>">
				<%= flash[k] %>
			</div>
		<% end %>
	<% end %>
	<% if !user_signed_in? %>
		<div class="jumbotron">
				<h1>Welcome to a Family Tree Analyzer </h1>
				<p class="text-muted">
				You can upload a 
				<a href="http://en.wikipedia.org/wiki/GEDCOM"> GEDCOM-file</a>
				and analyze your family tree! 
		  	</p>
			<%= link_to "Sign up", new_user_registration_path, class: "btn btn-lg btn-primary" %>
		</div>
	<% else %>
		<h1>Dashboard
			<br />
			<small>
				Here you can upload a 
				<a href="http://en.wikipedia.org/wiki/GEDCOM"> GEDCOM-file</a>
				and analyze your family tree!
			</small>
		</h1>
		<div class="jumbotron">
			<div class="row">
				<div class="col-md-6">
					<%= form_for :gedcomfile, :html => { :multipart => true }, :url => upload_path do |f| %>
						<p>Upload a family Tree</p>
						<div class="align-block-to-button">
							<div class="form-group">
								<%= f.file_field :data, :id => "file" %>
							</div>
							<div class="form-group">
								<%= f.text_field :filename, :id => "family-name", :class => "form-control pull-left", :placeholder=>"Family name" %>
							</div>
						</div>
						<button id="upload" disabled type="submit" class="btn btn-success">Upload</button>
					<% end %>
				</div>
				<div class="col-md-6">
					<% if @trees.size > 0 %>
						<%= form_for :gedcom_file, :url => upload_path do |f| %>
							<p>Select a tree for analysis</p>
							<div class="btn-group">
								<%= f.select(:id, @trees.map {|tree| [tree.filename, tree.id]}) %>
							</div>
							<button type="submit" class="btn btn-success">Go</button>
							<%= link_to 'Delete', gedcom_file_path, method: :delete, data: { confirm: 'Are you sure?'}, class: "btn btn-danger" %>
						<% end %>
					<% else %>
						<p>You have no trees yet.</p>
					<% end %>
				</div>
			</div>
		</div>		
	<% end %>
</div>
